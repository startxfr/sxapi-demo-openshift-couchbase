{
    "name": "sxapi-demo-openshift-couchbase-bot-streamer",
    "description": "Bot streamer service for the sxapi openshift couchbase demo (dev)",
    "version": "0.1.11",
    "debug": true,
    "resources": {
        "serviceinfo": {
            "_class": "serviceinfo"
        },
        "couchbase-api": {
            "_class": "couchbase",
            "cluster": "http://{{{COUCHBASE_SERVICE_HOST}}}:8091",
            "bucket": "{{{COUCHBASE_BUCKET}}}",
            "user": "{{{COUCHBASE_USER}}}",
            "password": "{{{COUCHBASE_PASSWORD}}}"
        },
        "twitter": {
            "_class": "twitter",
            "consumer_key": "{{{twitter_consumer_key}}}",
            "consumer_secret": "{{{twitter_consumer_secret}}}",
            "access_token_key": "{{{twitter_access_token_key}}}",
            "access_token_secret": "{{{twitter_access_token_secret}}}"
        }
    },
    "log": {
        "filters": {
            "level": "0,1,2,3,4",
            "type": "debug,info,error,warn"
        },
        "couchbase": {
            "resource": "couchbase-api",
            "eventName": "application:log"
        }
    },
    "server": {
        "type": "express",
        "port": "8080",
        "lib": "./mylib",
        "enableWebsockets": true,
        "websockets": {
            "events": [
                {
                    "event": "test",
                    "handler": "$ws.websockets.onMessageDefaultCallback"
                },
                {
                    "event": "testGlobal",
                    "handler": "$ws.lib.mySocketEndpointFunction"
                },
                {
                    "event": "disconnect",
                    "handler": "$ws.websockets.onMessageDefaultCallback"
                }
            ]
        },
        "endpoints": [
            {
                "path": "/health",
                "resource": "serviceinfo",
                "endpoint": "health"
            }
        ]
    },
    "bot": {
        "lib": "./mylib",
        "cron": [
            {
                "id": "test-cront-task",
                "name": "Execute test cron task",
                "schedule": "*/1 * * * *",
                "task": "myCronFunction"
            }
        ],
        "readers": {
            "twitter": [
                {
                    "resource": "twitter",
                    "filters": [
                        {
                            "id": "test-twitter-startx",
                            "match": "#paris",
                            "task": "myTwitterFunction",
                            "outputResource": "couchbase-api",
                            "tweetKeyPrefix": "tweet::",
                            "userKeyPrefix": "twittos::"
                        },
                        {
                            "id": "test-twitter-startx",
                            "match": "#london",
                            "task": "myTwitterFunction",
                            "outputResource": "couchbase-api",
                            "tweetKeyPrefix": "tweet::",
                            "userKeyPrefix": "twittos::"
                        },
                        {
                            "id": "test-twitter-startx",
                            "match": "#Capital",
                            "task": "myTwitterFunction",
                            "outputResource": "couchbase-api",
                            "tweetKeyPrefix": "tweet::",
                            "userKeyPrefix": "twittos::"
                        }
                    ]
                }
            ]
        }
    }
}
